<Page x:Class="MainProgram.Pages.Page_FloorPlanConfig"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:bs="clr-namespace:MainProgram.Pages"
      
      mc:Ignorable="d" 
      d:DesignHeight="700" 
	Title="Page_FloorPlanConfig">
    <ScrollViewer  HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="30"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="320"/>
                <RowDefinition Height="40"/>
            </Grid.RowDefinitions>

            <TextBlock Text="图纸配置" FontSize="18" FontWeight="Bold" Foreground="Red"
                   HorizontalAlignment="Center" VerticalAlignment="Center"/>

            <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <GroupBox Header="解析参数设置" Foreground="Blue" FontSize="15"
                  HorizontalAlignment="Left"  VerticalAlignment="Stretch" Margin="20,20,10,20"
                  MinWidth="950">
                    <AdornerDecorator>
                        <Grid >
                            <Grid.RowDefinitions>
                                <RowDefinition Height="30"/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>


                            <Grid VerticalAlignment="Center">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="80"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="图纸路径：" FontSize="12" Foreground="Black"
                                   VerticalAlignment="Center" Margin="5,0,5,0"/>
                                <TextBox Name="tbxDxfPath" Background="#D3D3D3"
                                 Grid.Column="1" 
                                 IsReadOnly="True" 
                                 Margin="5,0,5,0"/>
                            </Grid>


                            <Grid Grid.Row="1" Margin="5">
                                <Grid.Resources>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="HorizontalAlignment" Value="Left"/>
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                        <Setter Property="FontSize" Value="12"/>
                                    </Style>

                                    <Style TargetType="TextBox">
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                        <Setter Property="HorizontalContentAlignment" Value="Right"/>
                                        <Setter Property="Margin" Value="2"/>
                                        <Setter Property="FontSize" Value="12"/>
                                    </Style>

                                    <Style TargetType="ComboBox">
                                        <Setter Property="HorizontalAlignment" Value="Stretch"/>
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                        <Setter Property="Margin" Value="2"/>
                                        <Setter Property="FontSize" Value="12"/>
                                    </Style>


                                </Grid.Resources>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <GroupBox Grid.Column="0" Header="建筑" FontSize="14" Foreground="Black">
                                    <AdornerDecorator>
                                        <Grid Margin="5">
                                            <Grid.RowDefinitions>
                                                <RowDefinition/>
                                                <RowDefinition/>
                                                <RowDefinition/>
                                                <RowDefinition/>
                                            </Grid.RowDefinitions>

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="0.6*"/>
                                                <ColumnDefinition Width="0.4*"/>
                                            </Grid.ColumnDefinitions>

                                            <TextBlock Text="楼层数：" Grid.Row="0" />
                                            <TextBlock Text="起始高度(mm)：" Grid.Row="1"/>
                                            <TextBlock Text="楼板厚度(mm)：" Grid.Row="2"/>
                                            <TextBlock Text="楼层净高(mm)：" Grid.Row="3" />

                                            <TextBox Name="tbxNumOfFloorLevels"  Grid.Row="0" Grid.Column="1" Text="7"/>
                                            <TextBox Name="tbxStartHeight"  Grid.Row="1" Grid.Column="1" Text="0"/>
                                            <ComboBox Name="cboFloorThickness" Grid.Row="2" Grid.Column="1" SelectedIndex="0">
                                                <ComboBoxItem Content="100"/>
                                                <ComboBoxItem Content="120"/>
                                                <ComboBoxItem Content="150"/>
                                                <ComboBoxItem Content="200"/>
                                            </ComboBox>
                                            <ComboBox Name="cboFloorHeadroom"  Grid.Row="3" Grid.Column="1" SelectedIndex="0">
                                                <ComboBoxItem Content="2700"/>
                                                <ComboBoxItem Content="2800"/>
                                                <ComboBoxItem Content="2900"/>
                                                <ComboBoxItem Content="3000"/>
                                            </ComboBox>
                                        </Grid>
                                    </AdornerDecorator>
                                </GroupBox>
                                <GroupBox Grid.Column="1" Header="门窗" FontSize="14" Foreground="Black">
                                    <AdornerDecorator>
                                        <Grid Margin="5">
                                            <Grid.RowDefinitions>
                                                <RowDefinition/>
                                                <RowDefinition/>
                                                <RowDefinition/>
                                                <RowDefinition/>
                                            </Grid.RowDefinitions>

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="0.6*"/>
                                                <ColumnDefinition Width="0.4*"/>
                                            </Grid.ColumnDefinitions>


                                            <TextBlock Text="门槛高度(mm)：" Grid.Row="0" />
                                            <TextBlock Text="门高度(mm)：" Grid.Row="1"/>
                                            <TextBlock Text="窗槛高度(mm)：" Grid.Row="2"/>
                                            <TextBlock Text="窗高度(mm)：" Grid.Row="3"/>

                                            <TextBox Name="tbxDoorStartHeight"  Grid.Row="0" Grid.Column="1" Text="0"/>
                                            <TextBox Name="tbxDoorheight"  Grid.Row="1" Grid.Column="1" Text="2100"/>
                                            <TextBox Name="tbxWindowStartHeight"  Grid.Row="2" Grid.Column="1" Text="900"/>
                                            <TextBox Name="tbxWindowheight"  Grid.Row="3" Grid.Column="1" Text="1500"/>
                                        </Grid>
                                    </AdornerDecorator>
                                </GroupBox>
                                <GroupBox Grid.Column="2" Header="阳台及楼梯栏杆" FontSize="14" Foreground="Black">
                                    <AdornerDecorator>
                                        <Grid Margin="5">
                                            <Grid.RowDefinitions>
                                                <RowDefinition/>
                                                <RowDefinition/>
                                                <RowDefinition/>
                                                <RowDefinition/>
                                            </Grid.RowDefinitions>

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="0.6*"/>
                                                <ColumnDefinition Width="0.4*"/>
                                            </Grid.ColumnDefinitions>

                                            <TextBlock Text="阳台栏杆高(mm)：" Grid.Row="0"/>
                                            <TextBlock Text="楼梯扶手高(mm)：" Grid.Row="1" />
                                            <TextBlock Text="楼梯扶手宽(mm)：" Grid.Row="2"/>
                                            <TextBlock Text="楼梯扶手厚(mm)：" Grid.Row="3"/>



                                            <ComboBox Name="cboBalusterHandrailHeight" Grid.Row="0" Grid.Column="1" SelectedIndex="2">
                                                <ComboBoxItem Content="900"/>
                                                <ComboBoxItem Content="1000"/>
                                                <ComboBoxItem Content="1050"/>
                                                <ComboBoxItem Content="1100"/>
                                            </ComboBox>
                                            <ComboBox Name="cboStairHandrailHeight" Grid.Row="1" Grid.Column="1" SelectedIndex="2">
                                                <ComboBoxItem Content="900"/>
                                                <ComboBoxItem Content="1000"/>
                                                <ComboBoxItem Content="1050"/>
                                                <ComboBoxItem Content="1100"/>
                                            </ComboBox>
                                            <TextBox Name="tbxStairHandrailWidth"  Grid.Row="2" Grid.Column="1" Text="80"/>
                                            <TextBox Name="tbxStairHandrailThickness"  Grid.Row="3" Grid.Column="1" Text="100"/>
                                        </Grid>
                                    </AdornerDecorator>
                                </GroupBox>
                                <GroupBox Grid.Column="3" Header="电梯" FontSize="14" Foreground="Black">
                                    <AdornerDecorator>
                                        <Grid Margin="5">
                                            <Grid.RowDefinitions>
                                                <RowDefinition/>
                                                <RowDefinition/>
                                                <RowDefinition/>
                                            </Grid.RowDefinitions>

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="0.6*"/>
                                                <ColumnDefinition Width="0.4*"/>
                                            </Grid.ColumnDefinitions>

                                            <TextBlock Text="轿厢高度(mm)：" Grid.Row="0" />
                                            <TextBlock Text="门厚(mm)：" Grid.Row="1" />
                                            <TextBlock Text="门高(mm)：" Grid.Row="2" />

                                            <TextBox Name="tbxLiftCarHeight"  Grid.Row="0" Grid.Column="1" Text="2600"/>
                                            <TextBox Name="tbxElevatorDoorThickness"  Grid.Row="1" Grid.Column="1" Text="100"/>
                                            <TextBox Name="tbxElevatorDoorHeight"  Grid.Row="2" Grid.Column="1" Text="2100"/>


                                        </Grid>

                                    </AdornerDecorator>
                                </GroupBox>
                                <GroupBox Grid.Column="4" Header="阈值配置" FontSize="14" Foreground="Black">
                                    <AdornerDecorator>
                                        <Grid Margin="5">
                                            <Grid.RowDefinitions>
                                                <RowDefinition/>
                                                <RowDefinition/>
                                                <RowDefinition/>
                                            </Grid.RowDefinitions>

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="0.6*"/>
                                                <ColumnDefinition Width="0.4*"/>
                                            </Grid.ColumnDefinitions>


                                            <TextBlock Text="点阈值(mm)：" Grid.Row="0" />
                                            <TextBlock Text="角度阈值(°)：" Grid.Row="1"/>
                                            <TextBlock Text="墙宽阈值(mm)：" Grid.Row="2"/>

                                            <ComboBox Name="cboSamePointThreshold" Grid.Row="0" Grid.Column="1" SelectedIndex="3">
                                                <ComboBoxItem Content="1"/>
                                                <ComboBoxItem Content="0.1"/>
                                                <ComboBoxItem Content="0.01"/>
                                                <ComboBoxItem Content="0.001"/>
                                            </ComboBox>

                                            <ComboBox Name="cboEqualAngleThreshold" Grid.Row="1" Grid.Column="1" SelectedIndex="1">
                                                <ComboBoxItem Content="3"/>
                                                <ComboBoxItem Content="1"/>
                                                <ComboBoxItem Content="0.1"/>
                                                <ComboBoxItem Content="0.01"/>
                                            </ComboBox>

                                            <ComboBox Name="cboWallWidthThreshold" Grid.Row="2" Grid.Column="1" SelectedIndex="0">
                                                <ComboBoxItem Content="240"/>
                                                <ComboBoxItem Content="200"/>
                                                <ComboBoxItem Content="120"/>
                                                <ComboBoxItem Content="100"/>
                                            </ComboBox>
                                        </Grid>
                                    </AdornerDecorator>
                                </GroupBox>
                            </Grid>
                        </Grid>
                    </AdornerDecorator>
                </GroupBox>

                <GroupBox Header="地图数据存储设置"    FontSize="15" Foreground="Blue"
                          Grid.Column="1" HorizontalAlignment="Left"  VerticalAlignment="Stretch" Margin="10,20,20,20">
                    <AdornerDecorator>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition MinWidth="200"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="FileGDB 存储路径：" FontSize="12" Foreground="Black"
                                   VerticalAlignment="Center" Margin="5,0,5,0"/>

                            <TextBox Name="tbxFGDBPath" Background="#D3D3D3" Foreground="Black"
                                 Grid.Column="1" VerticalAlignment="Center" Margin="5,0,5,0"
                                 IsReadOnly="True" />

                            <Button Name="btnSelectFGDBPath" Grid.Column="2"
                                    VerticalAlignment="Center" HorizontalAlignment="Center" Margin="5,0,5,0"
                                    Height="30" Width="40">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Image Name="image" Source="/MainProgram;component/Assets/Picture/folder.png" Cursor="Hand"/>


                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="image" Property="Opacity" Value="1"/>
                                                <Setter TargetName="image" Property="RenderTransform">
                                                    <Setter.Value>
                                                        <ScaleTransform CenterX="20" CenterY="15" ScaleX="1.2" ScaleY="1.2"/>
                                                    </Setter.Value>
                                                </Setter>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>


                            <TextBlock  Text="FileGDB 名称：" FontSize="12"  Foreground="Black"
                                  Grid.Row="1" VerticalAlignment="Center" Margin="5,0,5,0"/>

                            <TextBox Name="tbxFGDBName" 
                                 Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" Margin="5,0,5,0"/>

                        </Grid>
                    </AdornerDecorator>
                </GroupBox>

            </Grid>



            <GroupBox Header="图层映射" Foreground="Blue" FontSize="15"
                  Grid.Row="1"
                  HorizontalAlignment="Stretch"  VerticalAlignment="Stretch" Margin="20,20,20,5">
                <GroupBox.Resources>
                    <!--listItemtemplate-->
                    <DataTemplate x:Key="listItemTemplate" DataType="bs:BoolString">
                        <Border BorderBrush="#FFB4A1A1" BorderThickness="0.5">
                            <CheckBox IsChecked="{Binding IsChecked,Mode=TwoWay,UpdateSourceTrigger=LostFocus}" >
                                <!--不使用Content属性是因为Content遇到字符串将使用ContentPresenter的AccessText功能，
                            其会将字符串中的第一个英文下滑线转换为热键，无法显示，造成字符串字符损失-->
                                <TextBlock Text="{Binding LayerName}"/>
                            </CheckBox>
                        </Border>
                    </DataTemplate>

                    <!--Style for ListBox-->
                    <Style TargetType="ListBox">
                        <Setter Property="ItemTemplate" Value="{StaticResource  listItemTemplate}"/>
                        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
                        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Visible"/>
                    </Style>

                    <!--Style for GroupBox-->
                    <Style TargetType="GroupBox">
                        <Setter Property="FontSize" Value="14"/>
                        <!--<Setter Property="Foreground" Value="Blue"/>-->
                    </Style>
                </GroupBox.Resources>
                <AdornerDecorator Margin="0,10,0,0" >
                    <Grid Margin="0,0,5,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>

                            <!--图层区-->
                        <GroupBox Header="墙" FontSize="14" Foreground="Black"
                                  Grid.Column="0" >


                            <AdornerDecorator>
                                <ListBox Name="lbWall"/>
                            </AdornerDecorator>
                        </GroupBox>

                        <GroupBox Header="阳台" Foreground="Black"
                                  Grid.Column="1" >
                            <AdornerDecorator>
                                <ListBox Name="lbBalcony"/>
                            </AdornerDecorator>
                        </GroupBox>

                        <GroupBox Header="门" Foreground="Black"
                                  Grid.Column="2" >
                            <AdornerDecorator>
                                <ListBox Name="lbDoor"/>
                            </AdornerDecorator>
                        </GroupBox>

                        <GroupBox Header="窗" Foreground="Black"
                                  Grid.Column="3" >
                            <AdornerDecorator>
                                <ListBox Name="lbWindow"/>
                            </AdornerDecorator>
                        </GroupBox>



                        <GroupBox Header="楼梯" Foreground="Black"
                                  Grid.Column="4" >
                            <AdornerDecorator>
                                <ListBox Name="lbStair"/>
                            </AdornerDecorator>
                        </GroupBox>

                        <GroupBox Header="电梯" Foreground="Black"
                                  Grid.Column="5" >
                            <AdornerDecorator>
                                <ListBox Name="lbElevator"/>
                            </AdornerDecorator>
                        </GroupBox>

                        <GroupBox Header="标注" Foreground="Black"
                                  Grid.Column="6" >
                            <AdornerDecorator>
                                <ListBox Name="lbLabel"/>
                            </AdornerDecorator>
                        </GroupBox>
                    </Grid>
                </AdornerDecorator>
            </GroupBox>



            <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                <Button  Name="btnLast" Content="上一步"  VerticalAlignment="Center" Margin="0,0,20,0" Width="100"/>
                <Button Name="btnEnsureConfig" Content="确定" FontSize="12"
                                Width="100" Margin="20,0,20,0"/>
                <Button  Name="btnNext" Content="下一步"  VerticalAlignment="Center" Margin="20,0,0,0" Width="100" IsEnabled="False"/>
            </StackPanel>

        </Grid>
    </ScrollViewer>
</Page>
